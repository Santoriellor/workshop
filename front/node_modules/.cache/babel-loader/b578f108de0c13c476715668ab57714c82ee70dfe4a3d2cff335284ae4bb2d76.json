{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { useAxios } from \"../utils/useAxios\";\nimport { Toast } from \"../utils/sweetalert\";\nconst useCRUD = endpoint => {\n  _s();\n  const axiosInstance = useAxios();\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Centralized error handling\n  const handleError = err => {\n    var _err$response;\n    console.error(`Error in ${endpoint}:`, err.message, ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || \"\");\n    setError(err.message || \"An error occurred\");\n  };\n\n  // Fetch all items\n  const fetchData = async () => {\n    try {\n      setLoading(true);\n      const response = await axiosInstance.get(`${endpoint}/`);\n      setData(response.data);\n    } catch (err) {\n      handleError(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Create an item\n  const createItem = async itemData => {\n    try {\n      const response = await axiosInstance.post(`${endpoint}/`, itemData);\n      setData(prev => [...prev, response.data]);\n      Toast.fire({\n        icon: \"success\",\n        title: `${endpoint} created successfully!`\n      });\n      return response.data;\n    } catch (err) {\n      handleError(err);\n    }\n  };\n\n  // Update an item\n  const updateItem = async (itemId, updatedFields) => {\n    try {\n      const response = await axiosInstance.patch(`${endpoint}/${itemId}/`, updatedFields);\n      setData(prev => prev.map(item => item.id === itemId ? response.data : item));\n      Toast.fire({\n        icon: \"success\",\n        title: `${endpoint} updated successfully!`\n      });\n      return response.data;\n    } catch (err) {\n      handleError(err);\n    }\n  };\n\n  // Delete an item\n  const deleteItem = async itemId => {\n    try {\n      await axiosInstance.delete(`${endpoint}/${itemId}/`);\n      setData(prev => prev.filter(item => item.id !== itemId));\n      Toast.fire({\n        icon: \"success\",\n        title: `${endpoint} deleted successfully!`\n      });\n    } catch (err) {\n      handleError(err);\n    }\n  };\n  useEffect(() => {\n    fetchData();\n  }, []);\n  return {\n    data,\n    fetchData,\n    createItem,\n    updateItem,\n    deleteItem,\n    loading,\n    error\n  };\n};\n_s(useCRUD, \"GXmy9Tt4oF0y7DmeoXrOFzVoMFA=\", false, function () {\n  return [useAxios];\n});\nexport default useCRUD;","map":{"version":3,"names":["useState","useEffect","useAxios","Toast","useCRUD","endpoint","_s","axiosInstance","data","setData","loading","setLoading","error","setError","handleError","err","_err$response","console","message","response","fetchData","get","createItem","itemData","post","prev","fire","icon","title","updateItem","itemId","updatedFields","patch","map","item","id","deleteItem","delete","filter"],"sources":["/home/santo/Desktop/Dev/workshop/front/src/hooks/UseCRUD.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useAxios } from \"../utils/useAxios\";\nimport { Toast } from \"../utils/sweetalert\";\n\nconst useCRUD = (endpoint) => {\n  const axiosInstance = useAxios();\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Centralized error handling\n  const handleError = (err) => {\n    console.error(\n      `Error in ${endpoint}:`,\n      err.message,\n      err.response?.data || \"\"\n    );\n    setError(err.message || \"An error occurred\");\n  };\n\n  // Fetch all items\n  const fetchData = async () => {\n    try {\n      setLoading(true);\n      const response = await axiosInstance.get(`${endpoint}/`);\n      setData(response.data);\n    } catch (err) {\n      handleError(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Create an item\n  const createItem = async (itemData) => {\n    try {\n      const response = await axiosInstance.post(`${endpoint}/`, itemData);\n      setData((prev) => [...prev, response.data]);\n      Toast.fire({\n        icon: \"success\",\n        title: `${endpoint} created successfully!`,\n      });\n      return response.data;\n    } catch (err) {\n      handleError(err);\n    }\n  };\n\n  // Update an item\n  const updateItem = async (itemId, updatedFields) => {\n    try {\n      const response = await axiosInstance.patch(\n        `${endpoint}/${itemId}/`,\n        updatedFields\n      );\n      setData((prev) =>\n        prev.map((item) => (item.id === itemId ? response.data : item))\n      );\n      Toast.fire({\n        icon: \"success\",\n        title: `${endpoint} updated successfully!`,\n      });\n      return response.data;\n    } catch (err) {\n      handleError(err);\n    }\n  };\n\n  // Delete an item\n  const deleteItem = async (itemId) => {\n    try {\n      await axiosInstance.delete(`${endpoint}/${itemId}/`);\n      setData((prev) => prev.filter((item) => item.id !== itemId));\n      Toast.fire({\n        icon: \"success\",\n        title: `${endpoint} deleted successfully!`,\n      });\n    } catch (err) {\n      handleError(err);\n    }\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  return {\n    data,\n    fetchData,\n    createItem,\n    updateItem,\n    deleteItem,\n    loading,\n    error,\n  };\n};\n\nexport default useCRUD;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}