{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { useAxios } from \"../utils/useAxios\";\nconst useCRUD = (apiEndpoint, parentResource = null, parentId = null) => {\n  _s();\n  const axiosInstance = useAxios();\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Construct URL dynamically\n  const baseURL = parentResource && parentId ? `${parentResource}/${parentId}/${apiEndpoint}/` : `${apiEndpoint}/`;\n\n  // Centralized error handling\n  const handleError = err => {\n    var _err$response;\n    console.error(`Error in ${apiEndpoint}:`, err.message, ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || \"\");\n    setError(err.message || \"An error occurred\");\n  };\n\n  // Fetch all items\n  const fetchData = async () => {\n    if (parentResource && !parentId) {\n      setData([]); // Clear state when no parentId is selected\n      return;\n    }\n    try {\n      setLoading(true);\n      const response = await axiosInstance.get(baseURL);\n      setData(response.data);\n    } catch (err) {\n      handleError(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Create an item\n  const createItem = async itemData => {\n    try {\n      const response = await axiosInstance.post(baseURL, itemData);\n      setData(prev => [...prev, response.data]);\n      return response.data;\n    } catch (err) {\n      handleError(err);\n    }\n  };\n\n  // Update an item\n  const updateItem = async (itemId, updatedFields) => {\n    try {\n      const response = await axiosInstance.patch(`${apiEndpoint}/${itemId}/`, updatedFields);\n      setData(prev => prev.map(item => item.id === itemId ? response.data : item));\n      return response.data;\n    } catch (err) {\n      handleError(err);\n    }\n  };\n\n  // Delete an item\n  const deleteItem = async itemId => {\n    try {\n      await axiosInstance.delete(`${apiEndpoint}/${itemId}/`);\n      setData(prev => prev.filter(item => item.id !== itemId));\n    } catch (err) {\n      handleError(err);\n    }\n  };\n\n  // Automatically fetch data when the parentId changes\n  useEffect(() => {\n    fetchData();\n  }, [parentId]);\n  return {\n    data,\n    setData,\n    fetchData,\n    createItem,\n    updateItem,\n    deleteItem,\n    loading,\n    error\n  };\n};\n_s(useCRUD, \"GXmy9Tt4oF0y7DmeoXrOFzVoMFA=\", false, function () {\n  return [useAxios];\n});\nexport default useCRUD;","map":{"version":3,"names":["useState","useEffect","useAxios","useCRUD","apiEndpoint","parentResource","parentId","_s","axiosInstance","data","setData","loading","setLoading","error","setError","baseURL","handleError","err","_err$response","console","message","response","fetchData","get","createItem","itemData","post","prev","updateItem","itemId","updatedFields","patch","map","item","id","deleteItem","delete","filter"],"sources":["/home/santo/Desktop/Dev/workshop/front/src/hooks/useCRUD.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useAxios } from \"../utils/useAxios\";\n\nconst useCRUD = (apiEndpoint, parentResource = null, parentId = null) => {\n  const axiosInstance = useAxios();\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Construct URL dynamically\n  const baseURL =\n    parentResource && parentId\n      ? `${parentResource}/${parentId}/${apiEndpoint}/`\n      : `${apiEndpoint}/`;\n\n  // Centralized error handling\n  const handleError = (err) => {\n    console.error(\n      `Error in ${apiEndpoint}:`,\n      err.message,\n      err.response?.data || \"\"\n    );\n    setError(err.message || \"An error occurred\");\n  };\n\n  // Fetch all items\n  const fetchData = async () => {\n    if (parentResource && !parentId) {\n      setData([]); // Clear state when no parentId is selected\n      return;\n    }\n    try {\n      setLoading(true);\n      const response = await axiosInstance.get(baseURL);\n      setData(response.data);\n    } catch (err) {\n      handleError(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Create an item\n  const createItem = async (itemData) => {\n    try {\n      const response = await axiosInstance.post(baseURL, itemData);\n      setData((prev) => [...prev, response.data]);\n      return response.data;\n    } catch (err) {\n      handleError(err);\n    }\n  };\n\n  // Update an item\n  const updateItem = async (itemId, updatedFields) => {\n    try {\n      const response = await axiosInstance.patch(\n        `${apiEndpoint}/${itemId}/`,\n        updatedFields\n      );\n      setData((prev) =>\n        prev.map((item) => (item.id === itemId ? response.data : item))\n      );\n      return response.data;\n    } catch (err) {\n      handleError(err);\n    }\n  };\n\n  // Delete an item\n  const deleteItem = async (itemId) => {\n    try {\n      await axiosInstance.delete(`${apiEndpoint}/${itemId}/`);\n      setData((prev) => prev.filter((item) => item.id !== itemId));\n    } catch (err) {\n      handleError(err);\n    }\n  };\n\n  // Automatically fetch data when the parentId changes\n  useEffect(() => {\n    fetchData();\n  }, [parentId]);\n\n  return {\n    data,\n    setData,\n    fetchData,\n    createItem,\n    updateItem,\n    deleteItem,\n    loading,\n    error,\n  };\n};\n\nexport default useCRUD;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}