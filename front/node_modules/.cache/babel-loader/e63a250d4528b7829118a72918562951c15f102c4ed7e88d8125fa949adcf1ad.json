{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { useAxios } from \"../utils/useAxios\";\nconst useCRUD = (resource, parentResource = null, parentId = null) => {\n  _s();\n  const axiosInstance = useAxios();\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Construct URL dynamically\n  const baseURL = parentResource && parentId ? `${parentResource}/${parentId}/${resource}/` : `${resource}/`;\n\n  // Centralized error handling\n  const handleError = err => {\n    var _err$response;\n    console.error(`Error in ${endpoint}:`, err.message, ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || \"\");\n    setError(err.message || \"An error occurred\");\n  };\n\n  // Fetch all items\n  const fetchData = async () => {\n    try {\n      setLoading(true);\n      const response = await axiosInstance.get(baseURL);\n      setData(response.data);\n    } catch (err) {\n      handleError(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Create an item\n  const createItem = async itemData => {\n    try {\n      const response = await axiosInstance.post(baseURL, itemData);\n      setData(prev => [...prev, response.data]);\n      return response.data;\n    } catch (err) {\n      handleError(err);\n    }\n  };\n\n  // Update an item\n  const updateItem = async (itemId, updatedFields) => {\n    try {\n      const response = await axiosInstance.patch(`${resource}/${itemId}/`, updatedFields);\n      setData(prev => prev.map(item => item.id === itemId ? response.data : item));\n      return response.data;\n    } catch (err) {\n      handleError(err);\n    }\n  };\n\n  // Delete an item\n  const deleteItem = async itemId => {\n    try {\n      await axiosInstance.delete(`${resource}/${itemId}/`);\n      setData(prev => prev.filter(item => item.id !== itemId));\n    } catch (err) {\n      handleError(err);\n    }\n  };\n  useEffect(() => {\n    fetchData();\n  }, []);\n  return {\n    data,\n    setData,\n    fetchData,\n    createItem,\n    updateItem,\n    deleteItem,\n    loading,\n    error\n  };\n};\n_s(useCRUD, \"GXmy9Tt4oF0y7DmeoXrOFzVoMFA=\", false, function () {\n  return [useAxios];\n});\nexport default useCRUD;","map":{"version":3,"names":["useState","useEffect","useAxios","useCRUD","resource","parentResource","parentId","_s","axiosInstance","data","setData","loading","setLoading","error","setError","baseURL","handleError","err","_err$response","console","endpoint","message","response","fetchData","get","createItem","itemData","post","prev","updateItem","itemId","updatedFields","patch","map","item","id","deleteItem","delete","filter"],"sources":["/home/santo/Desktop/Dev/workshop/front/src/hooks/useCRUD.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useAxios } from \"../utils/useAxios\";\n\nconst useCRUD = (resource, parentResource = null, parentId = null) => {\n  const axiosInstance = useAxios();\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Construct URL dynamically\n  const baseURL =\n    parentResource && parentId\n      ? `${parentResource}/${parentId}/${resource}/`\n      : `${resource}/`;\n\n  // Centralized error handling\n  const handleError = (err) => {\n    console.error(\n      `Error in ${endpoint}:`,\n      err.message,\n      err.response?.data || \"\"\n    );\n    setError(err.message || \"An error occurred\");\n  };\n\n  // Fetch all items\n  const fetchData = async () => {\n    try {\n      setLoading(true);\n      const response = await axiosInstance.get(baseURL);\n      setData(response.data);\n    } catch (err) {\n      handleError(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Create an item\n  const createItem = async (itemData) => {\n    try {\n      const response = await axiosInstance.post(baseURL, itemData);\n      setData((prev) => [...prev, response.data]);\n      return response.data;\n    } catch (err) {\n      handleError(err);\n    }\n  };\n\n  // Update an item\n  const updateItem = async (itemId, updatedFields) => {\n    try {\n      const response = await axiosInstance.patch(\n        `${resource}/${itemId}/`,\n        updatedFields\n      );\n      setData((prev) =>\n        prev.map((item) => (item.id === itemId ? response.data : item))\n      );\n      return response.data;\n    } catch (err) {\n      handleError(err);\n    }\n  };\n\n  // Delete an item\n  const deleteItem = async (itemId) => {\n    try {\n      await axiosInstance.delete(`${resource}/${itemId}/`);\n      setData((prev) => prev.filter((item) => item.id !== itemId));\n    } catch (err) {\n      handleError(err);\n    }\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  return {\n    data,\n    setData,\n    fetchData,\n    createItem,\n    updateItem,\n    deleteItem,\n    loading,\n    error,\n  };\n};\n\nexport default useCRUD;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}